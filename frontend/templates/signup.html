{% extends "base.html" %}
{% block content %}
<div class="form-card">
    <h2>Join BloodBridge</h2>
    <form method="POST">
        <input type="text" name="name" placeholder="Full Name" required>
        <input type="email" name="email" placeholder="Email Address" required>
        <input type="password" name="password" placeholder="Create Password" required>

        <select name="role" id="role-select">
            <option value="donor">Donor</option>
            <option value="recipient">Recipient</option>
            <option value="bloodbank">Blood Bank</option>
        </select>

        <!-- Blood group is important for donors and recipients -->
        <div class="input-group" id="blood-group-wrapper">
            <label>Blood Group</label>
            <select name="blood_group" id="blood-group-select" required>
                <option value="">--Select Blood Group--</option>
                <option value="A+">A+</option>
                <option value="A-">A-</option>
                <option value="B+">B+</option>
                <option value="B-">B-</option>
                <option value="AB+">AB+</option>
                <option value="AB-">AB-</option>
                <option value="O+">O+</option>
                <option value="O-">O-</option>
            </select>
        </div>

        <div class="input-group">
            <label>Admin Access Code (Optional)</label>
            <input type="password" name="admin_code" placeholder="Enter code if you are an admin">
        </div>

        <button type="submit" class="btn" style="width: 100%; border: none; cursor: pointer;">
            Register
        </button>
    </form>
</div>

<script>
// If you later add more roles, keep blood group required only for donor/recipient
const roleSelect = document.getElementById('role-select');
const bloodGroupWrapper = document.getElementById('blood-group-wrapper');
const bloodGroupSelect = document.getElementById('blood-group-select');

function updateBloodGroupVisibility() {
    const role = roleSelect.value;
    if (role === 'donor' || role === 'recipient') {
        bloodGroupWrapper.style.display = 'block';
        bloodGroupSelect.required = true;
    } else {
        bloodGroupWrapper.style.display = 'none';
        bloodGroupSelect.required = false;
        bloodGroupSelect.value = '';
    }
}

roleSelect.addEventListener('change', updateBloodGroupVisibility);
// Initialize on load
updateBloodGroupVisibility();
</script>
{% endblock %}
